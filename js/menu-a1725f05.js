import{_ as e,d as l,r as a,y as u,o as t,z as d,i as n,j as o,f as s,h as r,w as p,F as i,s as m,k as c,g as v,A as f,B as _,b as h,l as b,C as y,D as V,G as w,E as g,H as k,I as C,J as T}from"./index-31010104.js";import{f as U}from"./index-4742ef83.js";const S={class:"icon-continer"},x=["onClick"],I={class:"icon-item-typeface"};var M=e(l({__name:"icon-menu",emits:["getIconKey"],setup(e,{emit:l}){const h=a([]),b=a(""),y=a([]);u(b,((e,l)=>{y.value=[],e?h.value.forEach(((l,a)=>{l.indexOf(e)>-1&&y.value.push(l)})):y.value=h.value}));return t((()=>{for(const[e]of Object.entries(d))h.value.push(e);y.value=h.value})),(e,a)=>{const u=n("el-input"),t=n("el-icon"),d=n("el-col"),h=n("el-row");return o(),s("div",S,[r(u,{placeholder:"请输入关键字",class:"icon-continer-input",modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e)},null,8,["modelValue"]),r(h,null,{default:p((()=>[(o(!0),s(i,null,m(y.value,((e,a)=>(o(),c(d,{span:4,key:a},{default:p((()=>[v("div",{class:"icon-item",onClick:a=>(e=>{l("getIconKey",e)})(e)},[r(t,{size:28},{default:p((()=>[(o(),c(f(e)))])),_:2},1024),v("div",I,_(e),1)],8,x)])),_:2},1024)))),128))])),_:1})])}}}),[["__scopeId","data-v-3ad5e557"]]);const j=b(" 组件路径 "),q=b(" 路由路径 "),L=b(" 显示状态 "),z=b("新增"),O=b("取消"),F=b("更新"),K=b("取消"),A=l({__name:"menu-model",props:{status:{type:String,default:"add"},treeList:{type:[Object],default:[{value:0,label:"主目录",children:[]}]},menuItem:{type:Object,defalut:{}}},emits:["cancel","addMenu","updateMenu"],setup(e,{emit:l}){const u=e,d=a(!1),f=h(["目录","菜单","按钮"]),V=h(["显示","隐藏"]),w=a(),g=a({pid:0,menuType:0,icon:"",name:"",sort:0,component:"",path:"",isShow:0}),k=a(""),C=h({pid:[{required:!0,message:"请选择上级菜单",trigger:"blur"}],menuType:[{required:!0,message:"请选择菜单类型",trigger:"blur"}],name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],component:[{required:!0,message:"请输入组件路径",trigger:"blur"}],isShow:[{required:!0,message:"请选择是否显示",trigger:"blur"}]}),T=()=>{l("cancel")},U=()=>{var e;null==(e=w.value)||e.validate((e=>{e&&l("addMenu",g.value)}))},S=e=>{g.value.icon=e,d.value=!1};return t((()=>{(()=>{if(u.menuItem){const{id:e,pid:l,menuType:a,icon:t,name:d,sort:n,component:o,path:s,isShow:r}=u.menuItem;g.value={pid:l,menuType:a,icon:t,name:d,sort:n,component:o,path:s,isShow:r},k.value=e}})()})),(a,u)=>{const t=n("el-tree-select"),h=n("el-form-item"),x=n("el-col"),I=n("el-row"),A=n("el-radio"),E=n("el-radio-group"),G=n("CirclePlus"),B=n("el-icon"),D=n("el-input"),H=n("el-input-number"),J=n("QuestionFilled"),P=n("el-tooltip"),Q=n("el-button"),R=n("el-form"),N=n("el-dialog");return o(),s(i,null,[r(R,{ref_key:"ruleFormRef",ref:w,model:g.value,rules:C,"label-width":"100px"},{default:p((()=>[r(I,null,{default:p((()=>[r(x,{span:24},{default:p((()=>[r(h,{label:"上级菜单",class:"w-hundred",prop:"pid"},{default:p((()=>[r(t,{modelValue:g.value.pid,"onUpdate:modelValue":u[0]||(u[0]=e=>g.value.pid=e),data:e.treeList,"check-strictly":"","render-after-expand":!1,class:"w-hundred"},null,8,["modelValue","data"])])),_:1})])),_:1})])),_:1}),r(I,null,{default:p((()=>[r(x,{span:24},{default:p((()=>[r(h,{label:"菜单类型",class:"w-hundred",prop:"menuType"},{default:p((()=>[r(E,{modelValue:g.value.menuType,"onUpdate:modelValue":u[1]||(u[1]=e=>g.value.menuType=e),class:"w-hundred"},{default:p((()=>[(o(!0),s(i,null,m(f,((e,l)=>(o(),c(A,{label:l,key:l},{default:p((()=>[b(_(e),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(I,null,{default:p((()=>[r(x,{span:24},{default:p((()=>[r(h,{label:"菜单图标",class:"w-hundred",prop:"icon"},{default:p((()=>[r(D,{placeholder:"请选择菜单图标",modelValue:g.value.icon,"onUpdate:modelValue":u[3]||(u[3]=e=>g.value.icon=e),class:"w-hundred"},{append:p((()=>[r(B,{onClick:u[2]||(u[2]=e=>d.value=!0)},{default:p((()=>[r(G)])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(I,null,{default:p((()=>[r(x,{span:12},{default:p((()=>[r(h,{label:"菜单名称",prop:"name"},{default:p((()=>[r(D,{placeholder:"请输入菜单名称",modelValue:g.value.name,"onUpdate:modelValue":u[4]||(u[4]=e=>g.value.name=e)},null,8,["modelValue"])])),_:1})])),_:1}),r(x,{span:12},{default:p((()=>[r(h,{label:"显示排序",prop:"sort"},{default:p((()=>[r(H,{modelValue:g.value.sort,"onUpdate:modelValue":u[5]||(u[5]=e=>g.value.sort=e),min:0,max:1e3,"controls-position":"right"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(I,null,{default:p((()=>[r(x,{span:12},{default:p((()=>[r(h,{prop:"component"},{label:p((()=>[v("label",null,[r(P,{content:"组件路径，如：`dashboard/index`，默认在`views`目录下",placement:"top"},{default:p((()=>[r(B,null,{default:p((()=>[r(J)])),_:1})])),_:1}),j])])),default:p((()=>[r(D,{placeholder:"请输入组件路径",modelValue:g.value.component,"onUpdate:modelValue":u[6]||(u[6]=e=>g.value.component=e)},null,8,["modelValue"])])),_:1})])),_:1}),r(x,{span:12},{default:p((()=>[r(h,{prop:"path"},{label:p((()=>[v("label",null,[r(P,{content:"路由路径，如`/dashboard/index`，在网页搜索的路由路径http://localhost:3003/#/dashboard/index。如果为空，默认使用组件路径",placement:"top"},{default:p((()=>[r(B,null,{default:p((()=>[r(J)])),_:1})])),_:1}),q])])),default:p((()=>[r(D,{placeholder:"请输入组件路径",modelValue:g.value.path,"onUpdate:modelValue":u[7]||(u[7]=e=>g.value.path=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(I,null,{default:p((()=>[r(x,{span:24},{default:p((()=>[r(h,{prop:"isShow"},{label:p((()=>[v("label",null,[r(P,{content:"侧边栏菜单是否显示",placement:"top"},{default:p((()=>[r(B,null,{default:p((()=>[r(J)])),_:1})])),_:1}),L])])),default:p((()=>[r(E,{modelValue:g.value.isShow,"onUpdate:modelValue":u[8]||(u[8]=e=>g.value.isShow=e)},{default:p((()=>[(o(!0),s(i,null,m(V,((e,l)=>(o(),c(A,{label:l,key:l},{default:p((()=>[b(_(e),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(h,{align:"center"},{default:p((()=>["add"===e.status?(o(),s(i,{key:0},[r(Q,{type:"primary",onClick:U},{default:p((()=>[z])),_:1}),r(Q,{onClick:T},{default:p((()=>[O])),_:1})],64)):y("",!0),"edit"===e.status?(o(),s(i,{key:1},[r(Q,{type:"primary",onClick:u[9]||(u[9]=e=>(()=>{var e;const{pid:a,menuType:u,icon:t,name:d,sort:n,component:o,path:s,isShow:r}=g.value,p={pid:a,menuType:u,icon:t,name:d,sort:n,component:o,path:s,isShow:r,id:k.value};null==(e=w.value)||e.validate((e=>{e&&l("updateMenu",p)}))})())},{default:p((()=>[F])),_:1}),r(Q,{onClick:T},{default:p((()=>[K])),_:1})],64)):y("",!0)])),_:1})])),_:1},8,["model","rules"]),r(N,{modelValue:d.value,"onUpdate:modelValue":u[10]||(u[10]=e=>d.value=e),title:"菜单图标"},{default:p((()=>[r(M,{onGetIconKey:S})])),_:1},8,["modelValue"])],64)}}}),E={class:"app-container"},G={class:"flex mb-20"},B=b("查询"),D=b("新增"),H=b("编辑"),J=l({__name:"menu",setup(e){const l=a(!1),u=a(""),d=a([]),i=h(["显示","隐藏"]),m=a([]),S=a({}),x=a("add"),I=()=>{l.value=!1},M=e=>{w(e).then((e=>{g.success(e.data),l.value=!1,L()}))},j=e=>{k(e).then((e=>{"更新成功"===e.data&&(g.success(e.data),l.value=!1,L())}))},q=()=>{x.value="add",l.value=!0},L=()=>{T().then((e=>{d.value=e.data;const l=[{value:0,label:"主目录",children:e.data}];m.value=l}))};return t((()=>{L()})),(e,a)=>{const t=n("el-input"),h=n("el-button"),w=n("el-table-column"),g=n("el-icon"),k=n("el-tag"),T=n("el-table"),L=n("el-dialog"),z=n("IconModel");return o(),s("div",E,[v("div",G,[r(t,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),placeholder:"请输入菜单名称",clearable:"",class:"w-300"},null,8,["modelValue"]),r(h,{class:"ml-10",type:"primary",plain:""},{default:p((()=>[B])),_:1})]),r(h,{type:"primary",class:"mb-20",onClick:q},{default:p((()=>[D])),_:1}),r(T,{data:d.value,border:"",style:{width:"100%"},"row-key":"id"},{default:p((()=>[r(w,{prop:"name",label:"菜单名称"}),r(w,{prop:"icon",label:"图标"},{default:p((e=>[r(g,{size:20},{default:p((()=>[(o(),c(f(e.row.icon)))])),_:2},1024)])),_:1}),r(w,{prop:"sort",label:"排序"}),r(w,{prop:"perms",label:"权限标识"}),r(w,{prop:"component",label:"组件路径"}),r(w,{prop:"isShow",label:"状态"},{default:p((e=>[r(k,null,{default:p((()=>[b(_(i[e.row.isShow]),1)])),_:2},1024)])),_:1}),r(w,{prop:"createTime",label:"创建时间"},{default:p((e=>[b(_(V(U)(e.row.createTime)),1)])),_:1}),r(w,{prop:"updateTime",label:"更新时间"},{default:p((e=>[b(_(V(U)(e.row.updateTime)),1)])),_:1}),r(w,{prop:"edit",label:"编辑"},{default:p((e=>[r(h,{link:"",type:"primary",size:"small",onClick:a=>{return u=e.row.id,void C(u).then((e=>{S.value=e.data[0],x.value="edit",l.value=!0}));var u}},{default:p((()=>[H])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),r(L,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e),title:"add"===x.value?"新增菜单":"更新菜单",width:"40%"},{default:p((()=>[l.value&&"add"===x.value?(o(),c(A,{key:0,onCancel:I,onAddMenu:M,status:x.value,treeList:m.value},null,8,["status","treeList"])):y("",!0),l.value&&"edit"===x.value?(o(),c(A,{key:1,onCancel:I,onUpdateMenu:j,status:x.value,menuItem:S.value,treeList:m.value},null,8,["status","menuItem","treeList"])):y("",!0)])),_:1},8,["modelValue","title"]),r(z)])}}});export{J as default};
