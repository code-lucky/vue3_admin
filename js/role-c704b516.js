import{d as e,r as l,o as a,g as t,h as o,c as s,f as u,w as d,A as r,I as i,i as n,z as c,j as m,a as v,e as p,J as h,y as f,C as w,H as b}from"./index-1a30ab5e.js";import{g as y,a as _}from"./role-b87efb82.js";import{f as k}from"./index-4742ef83.js";const N={class:"continer"},C=m("新增"),R=m("更新"),S=m("取消"),V=e({__name:"role-model",props:{treeList:null,status:null,showRole:null},emits:["addRole","cancel","updateRole"],setup(e,{emit:m}){const v=e,p=l(),h={children:"children",label:"label"},f=l({roleName:"",isShow:0}),w=l([]),b=()=>{let e=[];e=e.concat(p.value.getHalfCheckedKeys()),e=e.concat(p.value.getCheckedKeys(!1));const l={roleName:f.value.roleName,isShow:f.value.isShow,rules:e};m("addRole",l)},y=()=>{let e=[];e=e.concat(p.value.getHalfCheckedKeys()),e=e.concat(p.value.getCheckedKeys(!1));const l={roleName:f.value.roleName,isShow:f.value.isShow,rules:e};m("updateRole",l)},_=()=>{m("cancel")};return a((()=>{var e,l,a;"edit"===v.status&&(f.value.roleName=(null==(e=v.showRole)?void 0:e.roleName)||"",f.value.isShow=(null==(l=v.showRole)?void 0:l.isShow)||0,w.value=(null==(a=v.showRole)?void 0:a.rules)||[],w.value.forEach((e=>{const l=p.value.getNode(e);l.isLeaf&&p.value.setChecked(l,!0,!1)})))})),(l,a)=>{const m=t("el-input"),v=t("el-form-item"),w=t("el-switch"),k=t("el-button"),V=t("el-form");return o(),s("div",N,[u(V,{model:f.value,"label-width":"120px"},{default:d((()=>[u(v,{label:"角色名称",prop:"roleName"},{default:d((()=>[u(m,{modelValue:f.value.roleName,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value.roleName=e),placeholder:"请输入角色名称"},null,8,["modelValue"])])),_:1}),u(v,{label:"显示",prop:"status"},{default:d((()=>[u(w,{modelValue:f.value.isShow,"onUpdate:modelValue":a[1]||(a[1]=e=>f.value.isShow=e),class:"ml-2","active-value":0,"inactive-value":1},null,8,["modelValue"])])),_:1}),u(v,null,{default:d((()=>[u(r(i),{data:e.treeList,ref_key:"treeRef",ref:p,props:h,"node-key":"id","show-checkbox":""},null,8,["data"])])),_:1}),u(v,null,{default:d((()=>["add"===e.status?(o(),n(k,{key:0,type:"primary",onClick:b},{default:d((()=>[C])),_:1})):c("",!0),"edit"===e.status?(o(),n(k,{key:1,type:"primary",onClick:y},{default:d((()=>[R])),_:1})):c("",!0),u(k,{onClick:_},{default:d((()=>[S])),_:1})])),_:1})])),_:1},8,["model"])])}}}),g={class:"app-container"},L={class:"flex mb-20"},x=m("查询"),U=m("重置"),j=m("添加角色"),K=m("编辑"),T=e({__name:"role",setup(e){const i=v(["显示","不显示"]),N=l([]),C=l(""),R=l(!1),S=l({id:0,label:"",children:[]}),T=l("add"),H=l({roleName:"",isShow:0}),z=()=>{y(C.value).then((e=>{N.value=e.data}))},A=()=>{C.value=""},E=e=>{const l={roleName:e.roleName,isShow:e.isShow,rules:e.rules};_(l).then((e=>{}))},I=()=>{R.value=!1},J=()=>{T.value="add",R.value=!0};return a((()=>{y(void 0).then((e=>{N.value=e.data})),b().then((e=>{S.value=e.data}))})),(e,l)=>{const a=t("el-input"),v=t("el-button"),b=t("el-table-column"),y=t("el-tag"),_=t("el-table"),q=t("el-dialog");return o(),s("div",g,[p("div",L,[u(a,{modelValue:C.value,"onUpdate:modelValue":l[0]||(l[0]=e=>C.value=e),placeholder:"请输入用户名称",clearable:"",class:"w-300"},null,8,["modelValue"]),u(v,{class:"ml-10",type:"primary",plain:"",onClick:z},{default:d((()=>[x])),_:1}),u(v,{class:"ml-10",icon:r(h),onClick:A},{default:d((()=>[U])),_:1},8,["icon"])]),u(v,{type:"primary",class:"mb-20",onClick:J},{default:d((()=>[j])),_:1}),u(_,{data:N.value,border:"",style:{width:"100%"}},{default:d((()=>[u(b,{prop:"id",label:"用户编号"}),u(b,{prop:"roleName",label:"角色昵称"}),u(b,{prop:"status",label:"状态"},{default:d((e=>[u(y,{type:0==e.row.status?"success":"danger"},{default:d((()=>[m(f(i[e.row.status]),1)])),_:2},1032,["type"])])),_:1}),u(b,{prop:"createTime",label:"创建时间"},{default:d((e=>[m(f(r(k)(e.row.createTime)),1)])),_:1}),u(b,{prop:"updateTime",label:"更新时间"},{default:d((e=>[m(f(r(k)(e.row.updateTime)),1)])),_:1}),u(b,{prop:"edit",label:"编辑"},{default:d((e=>[u(v,{link:"",type:"primary",size:"small",onClick:l=>(e=>{T.value="edit",R.value=!0;const l={roleName:e.roleName,isShow:e.status,rules:e.rules};H.value=l})(e.row)},{default:d((()=>[K])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),u(q,{modelValue:R.value,"onUpdate:modelValue":l[1]||(l[1]=e=>R.value=e),title:"add"===T.value?"添加角色":"修改角色",width:"30%",center:""},{default:d((()=>[R.value&&"add"===T.value?(o(),n(V,{key:0,onAddRole:E,onCancel:I,treeList:S.value,status:T.value},null,8,["treeList","status"])):c("",!0),R.value&&"edit"===T.value?(o(),n(V,{key:1,showRole:H.value,onUpdateRole:r(w),onCancel:I,treeList:S.value,status:T.value},null,8,["showRole","onUpdateRole","treeList","status"])):c("",!0)])),_:1},8,["modelValue","title"])])}}});export{T as default};
